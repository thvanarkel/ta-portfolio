{{ $currentPage := . }}
<header class="site-header">
  <a class="logo" href="{{ .Site.BaseURL }}">
    {{ .Site.Title }}
  </a>
  <nav class="site-nav">
    <ul>

    {{ $dict := (dict "" "") }}
    {{ range .Site.Sections }}
      {{ $dict = merge $dict (dict .Section (len (where .Site.RegularPages "Section" "==" .Section)) ) }}
    {{ end }}

    {{ range .Site.Menus.main }}
      {{ if gt (index $dict .Identifier) 0 }}
    <li {{ if or ($currentPage.IsMenuCurrent "main" .) (eq $currentPage.Section .Identifier) }} class="active" {{ end }}>
      <a href="{{ .URL }}">{{ .Name }}</a>
    </li>
      {{ end }}
    {{ end }}
    </ul>
    <span id="darkmode-toggle"></span><!-- ○● -->
  </nav>
</header>
